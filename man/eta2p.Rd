% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/eta2p_v12.R
\name{eta2p}
\alias{eta2p}
\title{Partial Eta-Squared for Linear Mixed Models}
\usage{
eta2p(
  model,
  effect,
  data,
  design = c("crossed", "nested"),
  subj_var = NULL,
  item_var = NULL,
  cross_vars = NULL,
  nest_vars = NULL,
  effect_level = NULL,
  var_x = NULL,
  operative = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{model}{A fitted model object from \code{lme4::lmer()}.}

\item{effect}{Character string specifying the fixed effect to analyze.
Must match a name in \code{fixef(model)}.}

\item{data}{Data frame used to fit the model.}

\item{design}{Character string: either \code{"crossed"} or \code{"nested"}.}

\item{subj_var}{Character string specifying the subject/participant grouping
variable. Retained for backward compatibility; prefer \code{cross_vars}.}

\item{item_var}{Character string specifying the item/stimulus grouping
variable. Retained for backward compatibility; prefer \code{cross_vars}.}

\item{cross_vars}{Character vector of ALL crossed grouping variable names
(e.g., \code{c("subject", "item", "rater")}). Supersedes \code{subj_var}
and \code{item_var} when provided. Supports any number of crossed factors.}

\item{nest_vars}{Character vector specifying nesting variables from lowest to
highest level (required for nested designs).}

\item{effect_level}{Character string specifying the level at which the effect
varies (e.g., "L1", "L2"). If NULL, will be detected automatically.}

\item{var_x}{Optional numeric. Pre-computed variance of the predictor (or
interaction product). If supplied, overrides the internal \code{var()}
calculation from \code{data}. Useful when raw data are unavailable but the
predictor variance is known (e.g., from design: a +/-1 binary predictor has
\code{var_x = 1}).}

\item{operative}{Logical. If TRUE, calculates operative effect size (excludes
variance components that don't contribute to SE). Default is FALSE.}

\item{verbose}{Logical. If TRUE, prints detailed results. Default is TRUE.}
}
\value{
An object of class \code{"eta2p_lmm"} containing:
\item{eta2p}{Partial eta-squared value}
\item{variance_effect}{Variance explained by the effect}
\item{variance_error}{Error variance}
\item{effect}{Name of the effect}
\item{design}{Design type ("crossed" or "nested")}
\item{operative}{Whether operative effect size was calculated}
\item{variance_components}{List of individual variance components}
\item{...}{Additional design-specific information}
}
\description{
Calculates partial eta-squared effect sizes for fixed effects in linear mixed
models with crossed or nested random effects.
}
\details{
The function implements a variance decomposition approach for computing partial
eta-squared in mixed models. Random slope variances are translated to the
outcome scale using the formula:
\deqn{\sigma^2_{slope}(Y) = \sigma^2_b \times \sigma^2_X}

For interaction effects, the variance of the predictor is calculated as
the variance of the actual product term (e.g., var(X1 * X2)), not the
product of individual variances. This correctly accounts for centering,
scaling, and correlation between predictors. The \code{var_x} argument
allows bypassing this computation when the variance is known a priori.

For \strong{general effect sizes} (default), all variance components are
included in the denominator. For \strong{operative effect sizes}
(\code{operative = TRUE}), only variance components that contribute to the
standard error of the effect are included.

Crossed designs support any number of grouping factors via \code{cross_vars}.
The two-argument form (\code{subj_var} + \code{item_var}) is retained for
backward compatibility and is equivalent to
\code{cross_vars = c(subj_var, item_var)}.
}
\examples{
\dontrun{
library(lme4)

# Two crossed factors (backward-compatible call)
model <- lmer(y ~ condition + (1 | subject) + (1 | item),
              data = crossed_data)
eta2p(model, "condition", crossed_data,
      design = "crossed",
      subj_var = "subject",
      item_var = "item")

# Three crossed factors using cross_vars
model3 <- lmer(y ~ condition + (1 | subject) + (1 | item) + (1 | rater),
              data = three_way_data)
eta2p(model3, "condition", three_way_data,
      design = "crossed",
      cross_vars = c("subject", "item", "rater"))

# Supply predictor variance directly (no raw data needed for this step)
eta2p(model, "condition", crossed_data,
      design = "crossed",
      cross_vars = c("subject", "item"),
      var_x = 1)   # +/-1 binary predictor
}

}
\references{
Correll, J., Mellinger, C., McClelland, G. H., & Judd, C. M. (2020).
Avoid Cohen's 'Small', 'Medium', and 'Large' for Power Analysis.
\emph{Trends in Cognitive Sciences}, 24(3), 200-207.

Rights, J. D., & Sterba, S. K. (2019). Quantifying explained variance in
multilevel models: An integrative framework for defining R-squared measures.
\emph{Psychological Methods}, 24(3), 309-338.
}
